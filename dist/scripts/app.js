!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var o=n();for(var t in o)("object"==typeof exports?exports:e)[t]=o[t]}}(this,function(){return function(e){function n(t){if(o[t])return o[t].exports;var i=o[t]={exports:{},id:t,loaded:!1};return e[t].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var o={};return n.m=e,n.c=o,n.p="",n(0)}([function(e,n,o){e.exports=o(1)},function(e,n,o){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var r=o(2),a=t(r),u=o(4),d=function s(){function e(){var e=t.clientWidth,n=t.clientHeight;t.width===e&&t.height===n||(t.width=e,t.height=n,d.resize(e,n),g.viewport(0,0,g.drawingBufferWidth,g.drawingBufferHeight))}function n(){e(),d.update(),requestAnimationFrame(n)}if(i(this,s),!u())return void(document.body.innerHTML="Unable to initialize WebGL. Your browser may not support it.");var o=new THREE.WebGLRenderer({antialias:!0,alpha:!0});if(o.extensions.get("ANGLE_instanced_arrays")===!1)return void(document.body.innerHTML="Unable to get ANGLE_instanced_arrays WebGL extension. Your browser may not support it.");var t=o.domElement;t.className="canvas";var r=document.getElementById("root");r.appendChild(t),r.style.backgroundColor="red";var d=window.dungeonizer.initVisualizer(o),l=new a["default"](d);l.resetDungeon();var g=o.getContext();n()};window.app=new d},function(e,n,o){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,o,t){return o&&e(n.prototype,o),t&&e(n,t),n}}(),a=o(3),u=t(a),d=function(){function e(n){var o=this;i(this,e),this.dungeonVisualizer=n,this.dungeon=null,this.dungeonParams=u["default"].dungeonParams;var t=new dat.GUI({width:400});t.add(this.dungeonParams,"dungeonSize").min(1).max(120).step(1);var r=t.addFolder("Rooms");r.add(this.dungeonParams,"roomSizeDistribution",{normal:"normal",uniform:"uniform"}),r.add(this.dungeonParams,"roomSizeMean").min(5).max(30).step(1),r.add(this.dungeonParams,"roomSizeDeviation").min(.1).max(.9).step(.01),r.add(this.dungeonParams,"mainRoomThreshold").min(1).max(1.33).step(.01),t.add(this.dungeonParams,"connectivity").min(0).max(1).step(.01),t.add(this.dungeonParams,"density").min(0).max(1).step(.01),t.add(u["default"].generationMode,"withWalls"),t.add(u["default"].generationMode,"isDebug"),t.add(this.dungeonParams,"fromDungeonId"),t.add(this.dungeonParams,"dungeonId").onChange().listen();var a={ExportToFile:function(){o.exportDungeon(o.dungeon,o.dungeonParams.dungeonId)}};t.add(a,"ExportToFile");var d={Generate:function(){o.resetDungeon()}};t.add(d,"Generate")}return r(e,[{key:"generateNewDungeonId",value:function(){var e=(Math.random()+1).toString(36).substring(7,16),n=e+","+this.dungeonParams.dungeonSize+","+this.dungeonParams.roomSizeDistribution+","+this.dungeonParams.roomSizeMean+","+this.dungeonParams.roomSizeDeviation+","+this.dungeonParams.mainRoomThreshold+","+this.dungeonParams.connectivity+","+this.dungeonParams.density;return n}},{key:"resetDungeon",value:function(){var e=this.dungeonParams.fromDungeonId?this.dungeonParams.dungeonId:this.generateNewDungeonId();this.dungeonParams.dungeonId=e;var n=window.dungeonizer.generateDungeonById(e,u["default"].generationMode.withWalls,u["default"].generationMode.isDebug);this.dungeon=n,this.dungeonVisualizer.makeDungeonVisual(n,e)}},{key:"exportDungeon",value:function(e,n){var o=JSON.stringify({dungeonId:n,dungeon:e},null,4);window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,1048576,function(e){e.root.getFile("dungeon_"+n+".bin",{create:!0},function(e){e.createWriter(function(n){var t=new Blob([o]);n.addEventListener("writeend",function(){location.href=e.toURL()},!1),n.write(t)},function(){})},function(){})},function(){})}}]),e}();n["default"]=d},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={generationMode:{withWalls:!0,isDebug:!1},dungeonParams:{roomSizeDistribution:"normal",dungeonSize:15,roomSizeMean:9,roomSizeDeviation:.75,mainRoomThreshold:1.1,connectivity:.55,density:.3,fromDungeonId:!1,dungeonId:""},visParams:{floorHeight:1,tunnelHeight:1,wallHeight:4,floorTunnelColor:[1,1,1],wallColor:[.6,.6,.6],mainFloorDebugColor:[.6,.1,.1],attachedFloorDebugColor:[.1,.4,.04],trashFloorDebugColor:[.3,.3,.3],trashFloorY:-.9,tunnelDebugHeight:1.2,tunnelDebugColor:[.7,.7,.7]}};n["default"]=o},function(e,n){"use strict";e.exports=function(){if(window.WebGLRenderingContext){for(var e=document.createElement("canvas"),n=["webgl","experimental-webgl","moz-webgl"],o=!1,t=0;t<n.length;t++)try{if(o=e.getContext(n[t]),o&&"function"==typeof o.getParameter)return!0}catch(i){console.log("Unable to initialize WebGL. Your browser may not support it.")}return!1}return!1}}])});